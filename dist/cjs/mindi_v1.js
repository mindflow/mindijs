"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coreutil_v1=require("coreutil_v1");class ConfigEntry{constructor(n,t,e){this.classReference=n,this.injectionType=t,this.poolSize=e,this.storedInstances=new coreutil_v1.List,this.instancePointer=0}preload(){if(this.instancePointer=0,"SINGLETON"===this.injectionType)this.storedInstances.add(new this.classReference);else if("POOL"===this.injectionType)for(i=0;i<this.poolSize;i++)this.storedInstances.add(new this.classReference);else if("PROTOTYPE"!==this.injectionType)throw"Unknown injectionType "+this.injectionType}getClassReference(){return this.classReference}getInjectionType(){return this.injectionType}getStoredInstances(){if(null===this.storedInstances)throw"Config entry has not been instansiated: "+this.classReference.name;return this.storedInstances}getInstance(n=[]){if("PROTOTYPE"===this.injectionType)return new this.classReference(...n);var t=this.storedInstances.get(this.instancePointer);return++this.instancePointer===this.storedInstances.size()&&(this.instancePointer=0),t}}class Config{constructor(){this.configElements=new coreutil_v1.Map,this.configProcessors=new coreutil_v1.List,this.instanceProcessors=new coreutil_v1.List}addAll(n){return this.configElements.addAll(n.getConfigElements()),this.configProcessors.addAll(n.getConfigProcessors()),this.instanceProcessors.addAll(n.getInstanceProcessors()),this}addSingleton(n){return this.configElements.set(n.name,new ConfigEntry(n,"SINGLETON")),this}addPrototype(n){return this.configElements.set(n.name,new ConfigEntry(n,"PROTOTYPE")),this}addNamedSingleton(n,t){return this.configElements.set(n,new ConfigEntry(t,"SINGLETON")),this}addNamedPrototype(n,t){return this.configElements.set(n,new ConfigEntry(t,"PROTOTYPE")),this}getConfigElements(){return this.configElements}getConfigProcessors(){return this.configProcessors}getInstanceProcessors(){return this.instanceProcessors}addConfigProcessor(n){this.configProcessors.add(n)}addInstanceProcessor(n){this.instanceProcessors.add(n)}}const LOG=new coreutil_v1.Logger("Injector");class Injector{static getInstance(){return injector}constructor(){this.config=new Config,this.configProcessorPromises=new coreutil_v1.List}load(n){this.finishedLoading=new Promise((n,t)=>{n()});const t=this.preloadConfigEntries(n);this.config.addAll(n),this.performInjections(n);let e=this.executeConfigProcessors(n,this.config.getConfigProcessors());this.configProcessorPromises.addAll(e),this.executeInstanceProcessors(t,!0),Promise.all(this.configProcessorPromises.getArray()).then(n=>{this.configProcessorPromises=new coreutil_v1.List})}inject(n){return this.injectFields(n,0),this.executeInstanceProcessors(new coreutil_v1.List([n])),n}prototypeInstance(n,t){const e=n.name,s=this.config.getConfigElements().get(e);if(!s)throw LOG.error("No config found for class: "+e),"No config found for class: "+e;if("PROTOTYPE"!==s.getInjectionType())throw LOG.error("Config for class: "+e+" is not a prototype"),"Config for class: "+e+" is not a prototype";const o=this.getInstanceByClassReference(e,0,t);return this.executeInstanceProcessors(new coreutil_v1.List([o])),o}executeConfigProcessors(n,t){const e=new coreutil_v1.List;return t.forEach((t,s)=>{const o=t.processConfig(n);o&&e.add(o);return!0},this),e}executeInstanceProcessors(n,t=!1){let e=()=>{this.config.getInstanceProcessors().forEach((t,e)=>{n.forEach((n,e)=>{t.processInstance(n);return!0},this);return!0},this)};t?this.finishedLoading=Promise.all(this.configProcessorPromises.getArray()).then(n=>{e()}):e()}getFinishedLoadingPromise(){return this.finishedLoading}preloadConfigEntries(n){const t=new coreutil_v1.List;return n.getConfigElements().forEach((e,s,o)=>{s.preload();t.addAll(s.getStoredInstances());s.getInstance()&&s.getInstance().processConfig&&n.addConfigProcessor(s.getInstance());s.getInstance()&&s.getInstance().processInstance&&n.addInstanceProcessor(s.getInstance());return!0},this),t}performInjections(n){n.getConfigElements().forEach((n,t,e)=>{t.getStoredInstances().forEach((n,t)=>{this.injectFields(n,0);return!0},e);return!0},this)}injectFields(n,t){for(const e in n)if(void 0!==e&&null!==e&&null!=n[e]&&n[e].prototype instanceof Object){const s=this.getInstanceByClassReference(n[e].name,t);void 0!==s&&null!==s?n[e]=s:void 0===s&&LOG.error("No instance found when trying to inject field '"+e+"' in '"+n.constructor.name+"'")}return n.postInject&&n.postInject(this),n}getInstanceByClassReference(n,t,e=[]){let s=null;return Injector.name===n?this:(this.config.getConfigElements().forEach((o,i,r)=>{if(o===n){if(s=i.getInstance(e),"PROTOTYPE"===i.getInjectionType()){if(!(t<3))throw"Structure of managed objects is too deep when trying to inject "+n;this.injectFields(s,t++)}return!1}return!0},this),s||LOG.error("No object found for "+n),s)}}const injector=new Injector,LOG$1=new coreutil_v1.Logger("PostConfigInstanceProcessor");class PostConfigInstanceProcessor{processInstance(n){n.postConfig&&n.postConfig()}}exports.Config=Config,exports.ConfigEntry=ConfigEntry,exports.Injector=Injector,exports.PostConfigInstanceProcessor=PostConfigInstanceProcessor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWluZGlfdjEuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taW5kaS9jb25maWdFbnRyeS5qcyIsIi4uLy4uL3NyYy9taW5kaS9jb25maWcuanMiLCIuLi8uLi9zcmMvbWluZGkvaW5qZWN0b3IuanMiLCIuLi8uLi9zcmMvbWluZGkvcG9zdENvbmZpZ0luc3RhbmNlUHJvY2Vzc29yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpc3QgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maWdFbnRyeSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2xhc3NSZWZlcmVuY2UsIGluamVjdGlvblR5cGUsIHBvb2xTaXplKSB7XHJcbiAgICAgICAgdGhpcy5jbGFzc1JlZmVyZW5jZSA9IGNsYXNzUmVmZXJlbmNlO1xyXG4gICAgICAgIHRoaXMuaW5qZWN0aW9uVHlwZSA9IGluamVjdGlvblR5cGU7XHJcbiAgICAgICAgdGhpcy5wb29sU2l6ZSA9IHBvb2xTaXplO1xyXG4gICAgICAgIHRoaXMuc3RvcmVkSW5zdGFuY2VzID0gbmV3IExpc3QoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlUG9pbnRlciA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlbG9hZCgpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlUG9pbnRlciA9IDA7XHJcbiAgICAgICAgaWYoXCJTSU5HTEVUT05cIiA9PT0gdGhpcy5pbmplY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmVkSW5zdGFuY2VzLmFkZChuZXcgdGhpcy5jbGFzc1JlZmVyZW5jZSgpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKFwiUE9PTFwiID09PSB0aGlzLmluamVjdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgZm9yKGkgPSAwIDsgaSA8IHRoaXMucG9vbFNpemUgOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmVkSW5zdGFuY2VzLmFkZChuZXcgdGhpcy5jbGFzc1JlZmVyZW5jZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoXCJQUk9UT1RZUEVcIiA9PT0gdGhpcy5pbmplY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgICAgIC8vIE5ldyBpbnN0YW5jZSBldmVyeSB0aW1lXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJVbmtub3duIGluamVjdGlvblR5cGUgXCIgKyB0aGlzLmluamVjdGlvblR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENsYXNzUmVmZXJlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsYXNzUmVmZXJlbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluamVjdGlvblR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5qZWN0aW9uVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtMaXN0fSB0aGUgbGlzdCBvZiBzdG9yZWQgaW5zdGFuY2VzXHJcbiAgICAgKi9cclxuICAgIGdldFN0b3JlZEluc3RhbmNlcygpIHtcclxuICAgICAgICBpZih0aGlzLnN0b3JlZEluc3RhbmNlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIkNvbmZpZyBlbnRyeSBoYXMgbm90IGJlZW4gaW5zdGFuc2lhdGVkOiBcIiArIHRoaXMuY2xhc3NSZWZlcmVuY2UubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmVkSW5zdGFuY2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBwYXJhbWV0ZXJzIHRoZSBwYXJhbWV0ZXJzIHRvIHVzZSBmb3IgdGhlIGNsYXNzIGlmIGl0IGlzIGNvbmZpZ3VyZWQgYXMgYSBwcm90b3R5cGVcclxuICAgICAqL1xyXG4gICAgZ2V0SW5zdGFuY2UocGFyYW1ldGVycyA9IFtdKSB7XHJcblxyXG4gICAgICAgIGlmKFwiUFJPVE9UWVBFXCIgPT09IHRoaXMuaW5qZWN0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuY2xhc3NSZWZlcmVuY2UoLi4ucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGluc3RhbmNlIGZyb20gdGhlIG5leHQgcG9zaXRpb24gaW4gdGhlIHBvb2xcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLnN0b3JlZEluc3RhbmNlcy5nZXQodGhpcy5pbnN0YW5jZVBvaW50ZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VQb2ludGVyICsrO1xyXG4gICAgICAgIGlmKHRoaXMuaW5zdGFuY2VQb2ludGVyID09PSB0aGlzLnN0b3JlZEluc3RhbmNlcy5zaXplKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZVBvaW50ZXIgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG5cclxufSIsImltcG9ydCB7IE1hcCwgTGlzdCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBDb25maWdFbnRyeSB9IGZyb20gXCIuL2NvbmZpZ0VudHJ5LmpzXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maWcge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnRWxlbWVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5jb25maWdQcm9jZXNzb3JzID0gbmV3IExpc3QoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlUHJvY2Vzc29ycyA9IG5ldyBMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQWxsKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnRWxlbWVudHMuYWRkQWxsKGNvbmZpZy5nZXRDb25maWdFbGVtZW50cygpKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1Byb2Nlc3NvcnMuYWRkQWxsKGNvbmZpZy5nZXRDb25maWdQcm9jZXNzb3JzKCkpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VQcm9jZXNzb3JzLmFkZEFsbChjb25maWcuZ2V0SW5zdGFuY2VQcm9jZXNzb3JzKCkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNpbmdsZXRvbihjbGFzc1JlZmVyZW5jZSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnRWxlbWVudHMuc2V0KGNsYXNzUmVmZXJlbmNlLm5hbWUsIG5ldyBDb25maWdFbnRyeShjbGFzc1JlZmVyZW5jZSwgXCJTSU5HTEVUT05cIikpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFByb3RvdHlwZShjbGFzc1JlZmVyZW5jZSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnRWxlbWVudHMuc2V0KGNsYXNzUmVmZXJlbmNlLm5hbWUsIG5ldyBDb25maWdFbnRyeShjbGFzc1JlZmVyZW5jZSwgXCJQUk9UT1RZUEVcIikpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZE5hbWVkU2luZ2xldG9uKG5hbWUsIGNsYXNzUmVmZXJlbmNlKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdFbGVtZW50cy5zZXQobmFtZSwgbmV3IENvbmZpZ0VudHJ5KGNsYXNzUmVmZXJlbmNlLCBcIlNJTkdMRVRPTlwiKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTmFtZWRQcm90b3R5cGUobmFtZSwgY2xhc3NSZWZlcmVuY2UpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ0VsZW1lbnRzLnNldChuYW1lLCBuZXcgQ29uZmlnRW50cnkoY2xhc3NSZWZlcmVuY2UsIFwiUFJPVE9UWVBFXCIpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtNYXB9XHJcbiAgICAgKi9cclxuICAgIGdldENvbmZpZ0VsZW1lbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0VsZW1lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0xpc3R9XHJcbiAgICAgKi9cclxuICAgIGdldENvbmZpZ1Byb2Nlc3NvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnUHJvY2Vzc29ycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtMaXN0fVxyXG4gICAgICovXHJcbiAgICBnZXRJbnN0YW5jZVByb2Nlc3NvcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VQcm9jZXNzb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbmZpZ1Byb2Nlc3Nvcihjb25maWdQcm9jZXNzb3IpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1Byb2Nlc3NvcnMuYWRkKGNvbmZpZ1Byb2Nlc3Nvcik7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSW5zdGFuY2VQcm9jZXNzb3IoaW5zdGFuY2VQcm9jZXNzb3IpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlUHJvY2Vzc29ycy5hZGQoaW5zdGFuY2VQcm9jZXNzb3IpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTGlzdCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgeyBDb25maWdFbnRyeSB9IGZyb20gXCIuL2NvbmZpZ0VudHJ5LmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiSW5qZWN0b3JcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5qZWN0b3Ige1xyXG5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gaW5qZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgQ29uZmlnKCk7XHJcbiAgICAgICAgdGhpcy5jb25maWdQcm9jZXNzb3JQcm9taXNlcyA9IG5ldyBMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWcgXHJcbiAgICAgKi9cclxuICAgIGxvYWQoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5maW5pc2hlZExvYWRpbmcgPSBuZXcgUHJvbWlzZShcclxuICAgICAgICAgICAgKHJlc29sdmUsIHJlamVjdCkgPT4geyByZXNvbHZlKCk7IH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBwcmVsb2FkZWRJbnN0YW5jZXMgPSB0aGlzLnByZWxvYWRDb25maWdFbnRyaWVzKGNvbmZpZyk7XHJcblxyXG4gICAgICAgIHRoaXMuY29uZmlnLmFkZEFsbChjb25maWcpO1xyXG5cclxuICAgICAgICB0aGlzLnBlcmZvcm1JbmplY3Rpb25zKGNvbmZpZyk7XHJcblxyXG4gICAgICAgIGxldCBwcm9taXNlTGlzdCA9IHRoaXMuZXhlY3V0ZUNvbmZpZ1Byb2Nlc3NvcnMoY29uZmlnLCB0aGlzLmNvbmZpZy5nZXRDb25maWdQcm9jZXNzb3JzKCkpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnUHJvY2Vzc29yUHJvbWlzZXMuYWRkQWxsKHByb21pc2VMaXN0KTtcclxuXHJcbiAgICAgICAgdGhpcy5leGVjdXRlSW5zdGFuY2VQcm9jZXNzb3JzKHByZWxvYWRlZEluc3RhbmNlcywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIFByb21pc2VcclxuICAgICAgICAgICAgLmFsbCh0aGlzLmNvbmZpZ1Byb2Nlc3NvclByb21pc2VzLmdldEFycmF5KCkpXHJcbiAgICAgICAgICAgIC50aGVuKChzdWNjZXNzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ1Byb2Nlc3NvclByb21pc2VzID0gbmV3IExpc3QoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5qZWN0KG9iamVjdCkge1xyXG4gICAgICAgIHRoaXMuaW5qZWN0RmllbGRzKG9iamVjdCwgMCk7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlSW5zdGFuY2VQcm9jZXNzb3JzKG5ldyBMaXN0KFtvYmplY3RdKSk7XHJcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtjbGFzc30gY2xhc3NSZWZlcmVuY2UgXHJcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBwYXJhbWV0ZXJBcnJheSBcclxuICAgICAqL1xyXG4gICAgcHJvdG90eXBlSW5zdGFuY2UoY2xhc3NSZWZlcmVuY2UsIHBhcmFtZXRlckFycmF5KSB7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtDb25maWdFbnRyeX0gKi9cclxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjbGFzc1JlZmVyZW5jZS5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY29uZmlnLmdldENvbmZpZ0VsZW1lbnRzKCkuZ2V0KGNsYXNzTmFtZSk7XHJcbiAgICAgICAgaWYoIWNvbmZpZykge1xyXG4gICAgICAgICAgICBMT0cuZXJyb3IoXCJObyBjb25maWcgZm91bmQgZm9yIGNsYXNzOiBcIiArIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIHRocm93IFwiTm8gY29uZmlnIGZvdW5kIGZvciBjbGFzczogXCIgKyBjbGFzc05hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcIlBST1RPVFlQRVwiICE9PSBjb25maWcuZ2V0SW5qZWN0aW9uVHlwZSgpKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIkNvbmZpZyBmb3IgY2xhc3M6IFwiICsgY2xhc3NOYW1lICsgXCIgaXMgbm90IGEgcHJvdG90eXBlXCIpO1xyXG4gICAgICAgICAgICB0aHJvdyBcIkNvbmZpZyBmb3IgY2xhc3M6IFwiICsgY2xhc3NOYW1lICsgXCIgaXMgbm90IGEgcHJvdG90eXBlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRJbnN0YW5jZUJ5Q2xhc3NSZWZlcmVuY2UoY2xhc3NOYW1lLCAwLCBwYXJhbWV0ZXJBcnJheSk7XHJcbiAgICAgICAgdGhpcy5leGVjdXRlSW5zdGFuY2VQcm9jZXNzb3JzKG5ldyBMaXN0KFtpbnN0YW5jZV0pKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWcgXHJcbiAgICAgKiBAcGFyYW0ge0xpc3R9IGNvbmZpZ1Byb2Nlc3NvcnNcclxuICAgICAqIEByZXR1cm5zIHtMaXN0fVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlQ29uZmlnUHJvY2Vzc29ycyhjb25maWcsIGNvbmZpZ1Byb2Nlc3NvcnMpIHtcclxuICAgICAgICBjb25zdCBwcm9taXNlTGlzdCA9IG5ldyBMaXN0KCk7XHJcbiAgICAgICAgY29uZmlnUHJvY2Vzc29ycy5mb3JFYWNoKChlbnRyeSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZ1Byb2Nlc3NvcnNQcm9taXNlID0gZW50cnkucHJvY2Vzc0NvbmZpZyhjb25maWcpO1xyXG4gICAgICAgICAgICBpZihjb25maWdQcm9jZXNzb3JzUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZUxpc3QuYWRkKGNvbmZpZ1Byb2Nlc3NvcnNQcm9taXNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZUxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7TGlzdH0gaW5zdGFuY2VMaXN0IFxyXG4gICAgICovXHJcbiAgICBleGVjdXRlSW5zdGFuY2VQcm9jZXNzb3JzKGluc3RhbmNlTGlzdCwgd2FpdEZvckNvbmZpZ1Byb2Nlc3NvcnMgPSBmYWxzZSkge1xyXG5cclxuICAgICAgICBsZXQgZXhlY3V0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuZ2V0SW5zdGFuY2VQcm9jZXNzb3JzKCkuZm9yRWFjaCgocHJvY2Vzc29yLHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMaXN0LmZvckVhY2goKGluc3RhbmNlLHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3Nvci5wcm9jZXNzSW5zdGFuY2UoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSx0aGlzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYod2FpdEZvckNvbmZpZ1Byb2Nlc3NvcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5pc2hlZExvYWRpbmcgPSBQcm9taXNlLmFsbCh0aGlzLmNvbmZpZ1Byb2Nlc3NvclByb21pc2VzLmdldEFycmF5KCkpLnRoZW4oKHN1Y2Nlc3MpID0+IHsgZXhlY3V0ZSgpIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV4ZWN1dGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAqL1xyXG4gICAgZ2V0RmluaXNoZWRMb2FkaW5nUHJvbWlzZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hlZExvYWRpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWcgXHJcbiAgICAgKi9cclxuICAgIHByZWxvYWRDb25maWdFbnRyaWVzKGNvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlcyA9IG5ldyBMaXN0KCk7XHJcbiAgICAgICAgY29uZmlnLmdldENvbmZpZ0VsZW1lbnRzKCkuZm9yRWFjaCgoa2V5LCB2YWx1ZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHZhbHVlLnByZWxvYWQoKTtcclxuICAgICAgICAgICAgaW5zdGFuY2VzLmFkZEFsbCh2YWx1ZS5nZXRTdG9yZWRJbnN0YW5jZXMoKSk7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlLmdldEluc3RhbmNlKCkgJiYgKHZhbHVlLmdldEluc3RhbmNlKCkucHJvY2Vzc0NvbmZpZykpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5hZGRDb25maWdQcm9jZXNzb3IodmFsdWUuZ2V0SW5zdGFuY2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodmFsdWUuZ2V0SW5zdGFuY2UoKSAmJiAodmFsdWUuZ2V0SW5zdGFuY2UoKS5wcm9jZXNzSW5zdGFuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuYWRkSW5zdGFuY2VQcm9jZXNzb3IodmFsdWUuZ2V0SW5zdGFuY2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqL1xyXG4gICAgcGVyZm9ybUluamVjdGlvbnMoY29uZmlnKSB7XHJcbiAgICAgICAgY29uZmlnLmdldENvbmZpZ0VsZW1lbnRzKCkuZm9yRWFjaCgoa2V5LCB2YWx1ZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHZhbHVlLmdldFN0b3JlZEluc3RhbmNlcygpLmZvckVhY2goKGluc3RhbmNlRW50cnksIGlubmVyUGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluamVjdEZpZWxkcyhpbnN0YW5jZUVudHJ5LCAwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9LCBwYXJlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN3YXBzIG91dCBjbGFzc2VzIGZvciBpbnN0YW5jZXMgaW4gdGhlIHByb3ZpZGVkIGluc3RhbmNlRW50cnksIGxpbWl0ZWQgYnkgc3RydWN0dXJlRGVwdGhcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGluc3RhbmNlRW50cnkgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RydWN0dXJlRGVwdGggXHJcbiAgICAgKi9cclxuICAgIGluamVjdEZpZWxkcyhpbnN0YW5jZUVudHJ5LCBzdHJ1Y3R1cmVEZXB0aCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgaW4gaW5zdGFuY2VFbnRyeSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGZpZWxkICE9PSB1bmRlZmluZWQgJiYgZmllbGQgIT09IG51bGwgJiYgaW5zdGFuY2VFbnRyeVtmaWVsZF0gIT0gbnVsbCAmJiBpbnN0YW5jZUVudHJ5W2ZpZWxkXS5wcm90b3R5cGUgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRJbnN0YW5jZUJ5Q2xhc3NSZWZlcmVuY2UoaW5zdGFuY2VFbnRyeVtmaWVsZF0ubmFtZSwgc3RydWN0dXJlRGVwdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlICE9PSB1bmRlZmluZWQgJiYgaW5zdGFuY2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUVudHJ5W2ZpZWxkXSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTE9HLmVycm9yKFwiTm8gaW5zdGFuY2UgZm91bmQgd2hlbiB0cnlpbmcgdG8gaW5qZWN0IGZpZWxkICdcIiArIGZpZWxkICsgXCInIGluICdcIiArIGluc3RhbmNlRW50cnkuY29uc3RydWN0b3IubmFtZSArIFwiJ1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbnN0YW5jZUVudHJ5LnBvc3RJbmplY3QpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2VFbnRyeS5wb3N0SW5qZWN0KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2VFbnRyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmQgY29uZmlndXJhdGlvbiBmb3IgY2xhc3MgbmFtZSwgYW5kIGluc3RhbnNpYXRlIG9yIHJldHVybiBpbnN0YW5jZXMgYmFzZWRcclxuICAgICAqIG9uIHdoZXRoZXIgdGhleSBhbGxyZWFkeSBleGlzdCBhbmQgd2hldGVyIHRoZXkgYXJlIFBST1RPVFlQRXMgb3IgU0lOR0xFVE9Oc1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2NsYXNzfSBjbGFzc1JlZmVyZW5jZSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJ1Y3R1cmVEZXB0aCBcclxuICAgICAqIEBwYXJhbSB7YXJyYXl9IHBhcmFtZXRlcnMgXHJcbiAgICAgKi9cclxuICAgIGdldEluc3RhbmNlQnlDbGFzc1JlZmVyZW5jZShjbGFzc05hbWVTdHJpbmcsIHN0cnVjdHVyZURlcHRoLCBwYXJhbWV0ZXJzID0gW10pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgIGlmKEluamVjdG9yLm5hbWUgPT09IGNsYXNzTmFtZVN0cmluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25maWcuZ2V0Q29uZmlnRWxlbWVudHMoKS5mb3JFYWNoKChrZXksIHZhbHVlLCBwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYoa2V5ID09PSBjbGFzc05hbWVTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlID0gdmFsdWUuZ2V0SW5zdGFuY2UocGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJQUk9UT1RZUEVcIiA9PT0gdmFsdWUuZ2V0SW5qZWN0aW9uVHlwZSgpKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RydWN0dXJlRGVwdGggPCAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5qZWN0RmllbGRzKGluc3RhbmNlLCBzdHJ1Y3R1cmVEZXB0aCsrKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlN0cnVjdHVyZSBvZiBtYW5hZ2VkIG9iamVjdHMgaXMgdG9vIGRlZXAgd2hlbiB0cnlpbmcgdG8gaW5qZWN0IFwiICsgY2xhc3NOYW1lU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgaWYoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIk5vIG9iamVjdCBmb3VuZCBmb3IgXCIgKyBjbGFzc05hbWVTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCBpbmplY3RvciA9IG5ldyBJbmplY3RvcigpOyIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIlBvc3RDb25maWdJbnN0YW5jZVByb2Nlc3NvclwiKTtcclxuXHJcbi8qKlxyXG4gKiBJbnN0YW5jZSB3aGljaCBjYWxscyBwb3N0Q29uZmlnIG9uIG9iamVjdHMgYWZ0ZXIgY29uZmlnUHJvY2Vzc29yIGlzIGZpbmlzaGVkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUG9zdENvbmZpZ0luc3RhbmNlUHJvY2Vzc29yIHtcclxuXHJcbiAgICBwcm9jZXNzSW5zdGFuY2UoaW5zdGFuY2UpIHtcclxuICAgICAgICBpZihpbnN0YW5jZS5wb3N0Q29uZmlnKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnBvc3RDb25maWcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59Il0sIm5hbWVzIjpbIkNvbmZpZ0VudHJ5IiwiW29iamVjdCBPYmplY3RdIiwiY2xhc3NSZWZlcmVuY2UiLCJpbmplY3Rpb25UeXBlIiwicG9vbFNpemUiLCJ0aGlzIiwic3RvcmVkSW5zdGFuY2VzIiwiTGlzdCIsImluc3RhbmNlUG9pbnRlciIsImFkZCIsImkiLCJuYW1lIiwicGFyYW1ldGVycyIsImluc3RhbmNlIiwiZ2V0Iiwic2l6ZSIsIkNvbmZpZyIsImNvbmZpZ0VsZW1lbnRzIiwiTWFwIiwiY29uZmlnUHJvY2Vzc29ycyIsImluc3RhbmNlUHJvY2Vzc29ycyIsImNvbmZpZyIsImFkZEFsbCIsImdldENvbmZpZ0VsZW1lbnRzIiwiZ2V0Q29uZmlnUHJvY2Vzc29ycyIsImdldEluc3RhbmNlUHJvY2Vzc29ycyIsInNldCIsImNvbmZpZ1Byb2Nlc3NvciIsImluc3RhbmNlUHJvY2Vzc29yIiwiTE9HIiwiTG9nZ2VyIiwiSW5qZWN0b3IiLCJpbmplY3RvciIsImNvbmZpZ1Byb2Nlc3NvclByb21pc2VzIiwiZmluaXNoZWRMb2FkaW5nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwcmVsb2FkZWRJbnN0YW5jZXMiLCJwcmVsb2FkQ29uZmlnRW50cmllcyIsInBlcmZvcm1JbmplY3Rpb25zIiwicHJvbWlzZUxpc3QiLCJleGVjdXRlQ29uZmlnUHJvY2Vzc29ycyIsImV4ZWN1dGVJbnN0YW5jZVByb2Nlc3NvcnMiLCJhbGwiLCJnZXRBcnJheSIsInRoZW4iLCJzdWNjZXNzIiwib2JqZWN0IiwiaW5qZWN0RmllbGRzIiwicGFyYW1ldGVyQXJyYXkiLCJjbGFzc05hbWUiLCJlcnJvciIsImdldEluamVjdGlvblR5cGUiLCJnZXRJbnN0YW5jZUJ5Q2xhc3NSZWZlcmVuY2UiLCJmb3JFYWNoIiwiZW50cnkiLCJwYXJlbnQiLCJjb25maWdQcm9jZXNzb3JzUHJvbWlzZSIsInByb2Nlc3NDb25maWciLCJpbnN0YW5jZUxpc3QiLCJ3YWl0Rm9yQ29uZmlnUHJvY2Vzc29ycyIsImV4ZWN1dGUiLCJwcm9jZXNzb3IiLCJwcm9jZXNzSW5zdGFuY2UiLCJpbnN0YW5jZXMiLCJrZXkiLCJ2YWx1ZSIsInByZWxvYWQiLCJnZXRTdG9yZWRJbnN0YW5jZXMiLCJnZXRJbnN0YW5jZSIsImFkZENvbmZpZ1Byb2Nlc3NvciIsImFkZEluc3RhbmNlUHJvY2Vzc29yIiwiaW5zdGFuY2VFbnRyeSIsImlubmVyUGFyZW50Iiwic3RydWN0dXJlRGVwdGgiLCJmaWVsZCIsInVuZGVmaW5lZCIsInByb3RvdHlwZSIsIk9iamVjdCIsImNvbnN0cnVjdG9yIiwicG9zdEluamVjdCIsImNsYXNzTmFtZVN0cmluZyIsIlBvc3RDb25maWdJbnN0YW5jZVByb2Nlc3NvciIsInBvc3RDb25maWciXSwibWFwcGluZ3MiOiJnSEFFYUEsYUFFVEMsWUFBWUMsRUFBZ0JDLEVBQWVDLEdBQ3ZDQyxLQUFLSCxlQUFpQkEsRUFDdEJHLEtBQUtG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
