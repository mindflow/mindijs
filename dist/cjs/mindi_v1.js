"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coreutil_v1=require("coreutil_v1");class InjectionPoint{static get INSTANCE_TYPE(){return 0}static get PROVIDER_TYPE(){return 1}static instanceByName(n,e,t=[]){return new InjectionPoint(n,e,InjectionPoint.INSTANCE_TYPE,t)}static instance(n,e=[]){return new InjectionPoint(n.name,n,InjectionPoint.INSTANCE_TYPE,e)}static provideryByName(n,e,t=[]){return new InjectionPoint(n,e,InjectionPoint.PROVIDER_TYPE,t)}static provider(n,e=[]){return new InjectionPoint(n.name,n,InjectionPoint.PROVIDER_TYPE,e)}constructor(n,e,t=InjectionPoint.INSTANCE_TYPE,o){this.name=n,this.classReference=e,this.type=t,this.parameters=o}getName(){return this.name}getClassReference(){return this.classReference}getType(){return this.type}getParameters(){return this.parameters}}const LOG=new coreutil_v1.Logger("Provider");class Provider{get(n=[]){return null}}class Config{getConfigEntries(){return null}getConfigProcessors(){return null}getInstanceProcessors(){return null}}class InstanceHolder{static get NEW_INSTANCE(){return 0}static get EXISTING_INSTANCE(){return 1}static holderWithNewInstance(n){return new InstanceHolder(n,InstanceHolder.NEW_INSTANCE)}static holderWithExistingInstance(n){return new InstanceHolder(n,InstanceHolder.EXISTING_INSTANCE)}constructor(n,e){this.instance=n,this.type=e}getInstance(){return this.instance}getType(){return this.type}}class TypeConfig{constructor(n,e){this.name=n,this.classReference=e}getClassReference(){return this.classReference}getName(){return this.name}instanceHolder(n=[]){return null}}const LOG$1=new coreutil_v1.Logger("ConfigAccessor");class ConfigAccessor{static instanceHolder(n,e,t=[]){const o=this.typeConfigByName(n,e);if(null===o)return LOG$1.error("No typeconfig found for "+n),null;const i=o.instanceHolder(t);return i||LOG$1.error("No object found for "+n),i}static typeConfigByName(n,e){let t=null;return e.getConfigEntries().forEach((e,o,i)=>{if(e===n)return t=o,!1;return!0},this),t||LOG$1.error("No config entry found for "+n),t}}const LOG$2=new coreutil_v1.Logger("ConfigProcessorExecutor");class ConfigProcessorExecutor{static execute(n,e,t){const o=new coreutil_v1.List;return n.forEach((n,i)=>{const r=ConfigAccessor.instanceHolder(n,t);r.getType()===InstanceHolder.NEW_INSTANCE&&e.injectTarget(r.getInstance(),t);const s=r.getInstance().processConfig(t);s&&o.add(s);return!0},this),Promise.all(o.getArray())}}class Injector{injectTarget(n,e,t=0){}}const LOG$3=new coreutil_v1.Logger("InstancePostConfigTrigger");class InstancePostConfigTrigger{process(n){n.postConfig&&n.postConfig()}}const LOG$4=new coreutil_v1.Logger("InstanceProcessorExecutor");class InstanceProcessorExecutor{static execute(n,e){e.getInstanceProcessors().forEach((t,o)=>{const i=ConfigAccessor.instanceHolder(t,e);i.getInstance().process(n);return!0},this)}}const LOG$5=new coreutil_v1.Logger("SingletonConfig");class SingletonConfig extends TypeConfig{static named(n,e){return new SingletonConfig(n,e)}static unnamed(n){return new SingletonConfig(n.name,n)}constructor(n,e){super(n,e)}instanceHolder(n=[]){return this.instance?InstanceHolder.holderWithExistingInstance(this.instance):(n&&n.length>0?this.instance=new this.classReference(...n):this.instance=new this.classReference,InstanceHolder.holderWithNewInstance(this.instance))}}class MindiProvider extends Provider{constructor(n,e,t){this.typeConfig=n,this.injector=e,this.config=t}get(n=[]){const e=this.typeConfig.instanceHolder(n);return e.getType()===InstanceHolder.NEW_INSTANCE&&this.injector.injectTarget(e.getInstance(),this.config),insatanceHolder.getInstance()}}const LOG$6=new coreutil_v1.Logger("MindiInjector");class MindiInjector extends Injector{static inject(n,e){INJECTOR.injectTarget(n,e)}static getInstance(){return INJECTOR}injectTarget(n,e,t=0){if(!n)throw Error("Missing target object");if(!e)throw Error("Missing config");if(!e.getFinalized())throw Error("Config not finalized");if(t>10)throw Error("Injection structure too deep");const o=this;Object.keys(n).forEach(function(i,r){n[i]instanceof InjectionPoint&&o.injectProperty(n,i,e,t)}),InstanceProcessorExecutor.execute(n,e)}injectProperty(n,e,t,o){if(n[e].getType()===InjectionPoint.PROVIDER_TYPE)return void this.injectPropertyProvider(n,e,t,o);this.injectPropertyInstance(n,e,t)}injectPropertyProvider(n,e,t){const o=n[e],i=ConfigAccessor.typeConfigByName(o.getName(),t);n[e]=new MindiProvider(i,this,t)}injectPropertyInstance(n,e,t,o){const i=n[e],r=ConfigAccessor.instanceHolder(i.getName(),t,i.getParameters());r.getType()===InstanceHolder.NEW_INSTANCE&&this.injectTarget(r.getInstance(),t,o++),n[e]=r.getInstance()}}const INJECTOR=new MindiInjector,LOG$7=new coreutil_v1.Logger("Config");class MindiConfig extends Config{constructor(){super(),this.finalized=!1,this.configEntries=new coreutil_v1.Map,this.configProcessors=new coreutil_v1.List,this.instanceProcessors=new coreutil_v1.List}merge(n){if(!n.getFinalized())throw Error("Cannot merge into an unfinalized config");const e=new coreutil_v1.Map;e.addAll(this.configEntries),e.addAll(n.getConfigEntries());const t=new coreutil_v1.List;t.addAll(this.configProcessors),t.addAll(n.getConfigProcessors());const o=new coreutil_v1.List;return o.addAll(this.instanceProcessors),o.addAll(n.getInstanceProcessors()),this.configEntries=e,this.configProcessors=t,this.instanceProcessors=o,this}addTypeConfig(n){return this.configEntries.set(n.getName(),n),this}addConfigProcessor(n){return this.configProcessors.add(n.name),this.addTypeConfig(SingletonConfig.unnamed(n))}addInstanceProcessor(n){return this.instanceProcessors.add(n.name),this.addTypeConfig(SingletonConfig.unnamed(n))}addAllTypeConfig(n){return n.forEach((n,e)=>{this.configEntries.set(n.getName(),n);return!0},this),this}addAllConfigProcessor(n){return n.forEach((n,e)=>{this.configProcessors.add(n.name);this.addTypeConfig(SingletonConfig.unnamed(n));return!0},this),this}addAllInstanceProcessor(n){return n.forEach((n,e)=>{this.instanceProcessors.add(n.name);this.addTypeConfig(SingletonConfig.unnamed(n));return!0},this),this}getConfigEntries(){return this.configEntries}getConfigProcessors(){return this.configProcessors}getInstanceProcessors(){return this.instanceProcessors}getFinalized(){return this.finalized}finalize(){return this.finalized=!0,ConfigProcessorExecutor.execute(this.getConfigProcessors(),MindiInjector.getInstance(),this)}}class PoolConfig extends TypeConfig{static named(n,e,t){return new PoolConfig(n,e,t)}static unnamed(n,e){return new PoolConfig(n.name,n,e)}constructor(n,e,t){super(n,e),this.poolSize=t}instanceHolder(n=[]){}}class PrototypeConfig extends TypeConfig{static named(n,e){return new PrototypeConfig(n,e)}static unnamed(n){return new PrototypeConfig(n.name,n)}constructor(n,e){super(n,e)}instanceHolder(n=[]){let e=null;return e=n&&n.length>0?new this.classReference(...n):new this.classReference,InstanceHolder.holderWithNewInstance(e)}}exports.Config=Config,exports.ConfigAccessor=ConfigAccessor,exports.ConfigProcessorExecutor=ConfigProcessorExecutor,exports.InjectionPoint=InjectionPoint,exports.Injector=Injector,exports.InstanceHolder=InstanceHolder,exports.InstancePostConfigTrigger=InstancePostConfigTrigger,exports.InstanceProcessorExecutor=InstanceProcessorExecutor,exports.MindiConfig=MindiConfig,exports.MindiInjector=MindiInjector,exports.MindiProvider=MindiProvider,exports.PoolConfig=PoolConfig,exports.PrototypeConfig=PrototypeConfig,exports.Provider=Provider,exports.SingletonConfig=SingletonConfig,exports.TypeConfig=TypeConfig;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWluZGlfdjEuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taW5kaS9hcGkvaW5qZWN0aW9uUG9pbnQuanMiLCIuLi8uLi9zcmMvbWluZGkvYXBpL3Byb3ZpZGVyLmpzIiwiLi4vLi4vc3JjL21pbmRpL2NvbmZpZy5qcyIsIi4uLy4uL3NyYy9taW5kaS90eXBlQ29uZmlnL2luc3RhbmNlSG9sZGVyLmpzIiwiLi4vLi4vc3JjL21pbmRpL3R5cGVDb25maWcvdHlwZUNvbmZpZy5qcyIsIi4uLy4uL3NyYy9taW5kaS9jb25maWdBY2Nlc3Nvci5qcyIsIi4uLy4uL3NyYy9taW5kaS9jb25maWdQcm9jZXNzb3IvY29uZmlnUHJvY2Vzc29yRXhlY3V0b3IuanMiLCIuLi8uLi9zcmMvbWluZGkvaW5qZWN0b3IuanMiLCIuLi8uLi9zcmMvbWluZGkvaW5zdGFuY2VQcm9jZXNzb3IvaW5zdGFuY2VQb3N0Q29uZmlnVHJpZ2dlci5qcyIsIi4uLy4uL3NyYy9taW5kaS9pbnN0YW5jZVByb2Nlc3Nvci9pbnN0YW5jZVByb2Nlc3NvckV4ZWN1dG9yLmpzIiwiLi4vLi4vc3JjL21pbmRpL3R5cGVDb25maWcvc2luZ2xldG9uQ29uZmlnLmpzIiwiLi4vLi4vc3JjL21pbmRpL21pbmRpUHJvdmlkZXIuanMiLCIuLi8uLi9zcmMvbWluZGkvbWluZGlJbmplY3Rvci5qcyIsIi4uLy4uL3NyYy9taW5kaS9taW5kaUNvbmZpZy5qcyIsIi4uLy4uL3NyYy9taW5kaS90eXBlQ29uZmlnL3Bvb2xDb25maWcuanMiLCIuLi8uLi9zcmMvbWluZGkvdHlwZUNvbmZpZy9wcm90b3R5cGVDb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEluamVjdGlvblBvaW50IHtcclxuXHJcbiAgICBzdGF0aWMgZ2V0IElOU1RBTkNFX1RZUEUoKSB7IHJldHVybiAwOyB9IFxyXG4gICAgc3RhdGljIGdldCBQUk9WSURFUl9UWVBFKCkgeyByZXR1cm4gMTsgfSBcclxuXHJcbiAgICBzdGF0aWMgaW5zdGFuY2VCeU5hbWUobmFtZSwgY2xhc3NSZWZlcmVuY2UsIHBhcmFtZXRlcnMgPSBbXSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5qZWN0aW9uUG9pbnQobmFtZSwgY2xhc3NSZWZlcmVuY2UsIEluamVjdGlvblBvaW50LklOU1RBTkNFX1RZUEUsIHBhcmFtZXRlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbnN0YW5jZShjbGFzc1JlZmVyZW5jZSwgcGFyYW1ldGVycyA9IFtdKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbmplY3Rpb25Qb2ludChjbGFzc1JlZmVyZW5jZS5uYW1lLCBjbGFzc1JlZmVyZW5jZSwgSW5qZWN0aW9uUG9pbnQuSU5TVEFOQ0VfVFlQRSwgcGFyYW1ldGVycyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByb3ZpZGVyeUJ5TmFtZShuYW1lLCBjbGFzc1JlZmVyZW5jZSwgcGFyYW1ldGVycyA9IFtdKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbmplY3Rpb25Qb2ludChuYW1lLCBjbGFzc1JlZmVyZW5jZSwgSW5qZWN0aW9uUG9pbnQuUFJPVklERVJfVFlQRSwgcGFyYW1ldGVycyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByb3ZpZGVyKGNsYXNzUmVmZXJlbmNlLCBwYXJhbWV0ZXJzID0gW10pIHtcclxuICAgICAgICByZXR1cm4gbmV3IEluamVjdGlvblBvaW50KGNsYXNzUmVmZXJlbmNlLm5hbWUsIGNsYXNzUmVmZXJlbmNlLCBJbmplY3Rpb25Qb2ludC5QUk9WSURFUl9UWVBFLCBwYXJhbWV0ZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjbGFzc1JlZmVyZW5jZSwgdHlwZSA9IEluamVjdGlvblBvaW50LklOU1RBTkNFX1RZUEUsIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY2xhc3NSZWZlcmVuY2UgPSBjbGFzc1JlZmVyZW5jZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENsYXNzUmVmZXJlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsYXNzUmVmZXJlbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFR5cGUoKSB7XHJcbiAgICAgICByZXR1cm4gdGhpcy50eXBlOyBcclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXJhbWV0ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnM7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiUHJvdmlkZXJcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvdmlkZXIge1xyXG5cclxuICAgIGdldChwYXJhbWV0ZXJzID0gW10pIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgQ29uZmlnIHtcclxuIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge01hcH1cclxuICAgICAqL1xyXG4gICAgZ2V0Q29uZmlnRW50cmllcygpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtMaXN0fVxyXG4gICAgICovXHJcbiAgICBnZXRDb25maWdQcm9jZXNzb3JzKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0xpc3R9XHJcbiAgICAgKi9cclxuICAgIGdldEluc3RhbmNlUHJvY2Vzc29ycygpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgSW5zdGFuY2VIb2xkZXIge1xyXG5cclxuICAgIHN0YXRpYyBnZXQgTkVXX0lOU1RBTkNFKCkgeyByZXR1cm4gMDsgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgRVhJU1RJTkdfSU5TVEFOQ0UoKSB7IHJldHVybiAxOyB9XHJcblxyXG4gICAgc3RhdGljIGhvbGRlcldpdGhOZXdJbnN0YW5jZShpbnN0YW5jZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5zdGFuY2VIb2xkZXIoaW5zdGFuY2UsIEluc3RhbmNlSG9sZGVyLk5FV19JTlNUQU5DRSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGhvbGRlcldpdGhFeGlzdGluZ0luc3RhbmNlKGluc3RhbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnN0YW5jZUhvbGRlcihpbnN0YW5jZSwgSW5zdGFuY2VIb2xkZXIuRVhJU1RJTkdfSU5TVEFOQ0UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluc3RhbmNlLCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5zdGFuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSBcIi4uL2FwaS9wcm92aWRlci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFR5cGVDb25maWcge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNsYXNzUmVmZXJlbmNlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNsYXNzUmVmZXJlbmNlID0gY2xhc3NSZWZlcmVuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2xhc3NSZWZlcmVuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3NSZWZlcmVuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGluc3RhbmNlSG9sZGVyKHBhcmFtZXRlcnMgPSBbXSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgSW5zdGFuY2VIb2xkZXIgfSBmcm9tIFwiLi90eXBlQ29uZmlnL2luc3RhbmNlSG9sZGVyLmpzXCI7XHJcbmltcG9ydCB7IFR5cGVDb25maWcgfSBmcm9tIFwiLi90eXBlQ29uZmlnL3R5cGVDb25maWcuanNcIjtcclxuXHJcbi8qKlxyXG4gKiBVdGlsaXRpZXMgZm9yIGFjY2Vzc2luZyBhIENvbmZpZyBvYmplY3RcclxuICovXHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ29uZmlnQWNjZXNzb3JcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlnQWNjZXNzb3Ige1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFuIGluc3RhbmNlIGJ5IGNsYXNzIG5hbWUgaW4gdGhlIGNvbmZpZ1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbWV0ZXJzXHJcbiAgICAgKiBAcmV0dXJucyB7SW5zdGFuY2VIb2xkZXJ9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpbnN0YW5jZUhvbGRlcihuYW1lLCBjb25maWcsIHBhcmFtZXRlcnMgPSBbXSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGVDb25maWcgPSB0aGlzLnR5cGVDb25maWdCeU5hbWUobmFtZSwgY29uZmlnKTtcclxuICAgICAgICBpZih0eXBlQ29uZmlnID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIk5vIHR5cGVjb25maWcgZm91bmQgZm9yIFwiICsgbmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZUhvbGRlciA9IHR5cGVDb25maWcuaW5zdGFuY2VIb2xkZXIocGFyYW1ldGVycyk7XHJcbiAgICAgICAgaWYoIWluc3RhbmNlSG9sZGVyKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIk5vIG9iamVjdCBmb3VuZCBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlSG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSB0eXBlIGNvbmZpZyBieSBjbGFzcyBuYW1lIGluIHRoZSBjb25maWdcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICogQHJldHVybnMge1R5cGVDb25maWd9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0eXBlQ29uZmlnQnlOYW1lKG5hbWUsIGNvbmZpZykge1xyXG4gICAgICAgIGxldCBjb25maWdFbnRyeSA9IG51bGw7XHJcbiAgICAgICAgY29uZmlnLmdldENvbmZpZ0VudHJpZXMoKS5mb3JFYWNoKChrZXksIHZhbHVlLCBwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYoa2V5ID09PSBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWdFbnRyeSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIGlmKCFjb25maWdFbnRyeSkge1xyXG4gICAgICAgICAgICBMT0cuZXJyb3IoXCJObyBjb25maWcgZW50cnkgZm91bmQgZm9yIFwiICsgbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb25maWdFbnRyeTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIsIExpc3QgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgeyBDb25maWdBY2Nlc3NvciB9IGZyb20gXCIuLi9jb25maWdBY2Nlc3Nvci5qc1wiO1xyXG5pbXBvcnQgeyBJbnN0YW5jZUhvbGRlciB9IGZyb20gXCIuLi90eXBlQ29uZmlnL2luc3RhbmNlSG9sZGVyLmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ29uZmlnUHJvY2Vzc29yRXhlY3V0b3JcIik7XHJcblxyXG4vKipcclxuICogRXhlY3V0ZXMgdGhlIHByb3ZpZGVkIGNvbmZpZyBwcm9jZXNzb3JzIG9uIHRoZSBwcm92aWRlZCBjb25maWcgcmVnaXN0cnlcclxuICogUmV0dXJucyBhIGxpc3Qgb2YgcHJvbWlzZXMgZm9yIHdoZW4gdGhlIGNvbmZpZyBwcm9jZXNzb3JzIGhhcyBjb21wbGV0ZWQgcnVubmluZ1xyXG4gKiBcclxuICogQSBjb25maWcgcHJvY2Vzc29yIHJlYWRzIHRoZSBjb25maWcgYW5kIHBlcmZvcm1zIGFueSBuZWNlc3NhcnkgYWN0aW9ucyBiYXNlZCBvblxyXG4gKiBjbGFzcyBhbmQgdHlwZSBpbmZvcm1hdGlvbi4gQSBjb25maWcgcHJvY2Vzc29yIGRvZXMgbm90IG9wZXJhdGUgb24gbWFuYWdlZCBpbnN0YW5jZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb25maWdQcm9jZXNzb3JFeGVjdXRvciB7XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtMaXN0fSBjb25maWdQcm9jZXNzb3JDbGFzc0xpc3RcclxuICAgICAqIEBwYXJhbSB7SW5qZWN0b3J9IGluamVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gcHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZCB3aGVuIGFsbCBjb25maWcgcHJvY2Vzc29ycyBhcmUgcmVzb2x2ZWRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGV4ZWN1dGUoY29uZmlnUHJvY2Vzc29yQ2xhc3NOYW1lTGlzdCwgaW5qZWN0b3IsIGNvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VMaXN0ID0gbmV3IExpc3QoKTtcclxuICAgICAgICBjb25maWdQcm9jZXNzb3JDbGFzc05hbWVMaXN0LmZvckVhY2goKGNvbmZpZ1Byb2Nlc3NvckNsYXNzTmFtZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8qKiAgQHR5cGUge0luc3RhbmNlSG9sZGVyfSAqL1xyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzb3JIb2xkZXIgPSBDb25maWdBY2Nlc3Nvci5pbnN0YW5jZUhvbGRlcihjb25maWdQcm9jZXNzb3JDbGFzc05hbWUsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGlmKHByb2Nlc3NvckhvbGRlci5nZXRUeXBlKCkgPT09IEluc3RhbmNlSG9sZGVyLk5FV19JTlNUQU5DRSkge1xyXG4gICAgICAgICAgICAgICAgaW5qZWN0b3IuaW5qZWN0VGFyZ2V0KHByb2Nlc3NvckhvbGRlci5nZXRJbnN0YW5jZSgpLCBjb25maWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NvcnNQcm9taXNlID0gcHJvY2Vzc29ySG9sZGVyLmdldEluc3RhbmNlKCkucHJvY2Vzc0NvbmZpZyhjb25maWcpO1xyXG4gICAgICAgICAgICBpZiAocHJvY2Vzc29yc1Byb21pc2UpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2VMaXN0LmFkZChwcm9jZXNzb3JzUHJvbWlzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VMaXN0LmdldEFycmF5KCkpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBJbmplY3RvciB7XHJcblxyXG4gICAgaW5qZWN0VGFyZ2V0KHRhcmdldCwgY29uZmlnLCBkZXB0aCA9IDApIHtcclxuXHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiSW5zdGFuY2VQb3N0Q29uZmlnVHJpZ2dlclwiKTtcclxuXHJcbi8qKlxyXG4gKiBJbnN0YW5jZSBwcm9jZXNzb3Igd2hpY2ggY2FsbHMgcG9zdENvbmZpZyBvbiBvYmplY3RzIGFmdGVyIGNvbmZpZ1Byb2Nlc3NvcnMgYXJlIGZpbmlzaGVkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VQb3N0Q29uZmlnVHJpZ2dlciB7XHJcblxyXG4gICAgcHJvY2VzcyhpbnN0YW5jZSkge1xyXG4gICAgICAgIGlmKGluc3RhbmNlLnBvc3RDb25maWcpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UucG9zdENvbmZpZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIsIExpc3QgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ29uZmlnQWNjZXNzb3IgfSBmcm9tIFwiLi4vY29uZmlnQWNjZXNzb3IuanNcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZy5qc1wiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkluc3RhbmNlUHJvY2Vzc29yRXhlY3V0b3JcIik7XHJcblxyXG4vKipcclxuICogRXhlY3V0ZXMgdGhlIGNvbmZpZ3MgaW5zdGFuY2UgcHJvY2Vzc29ycyBvbiB0aGUgcHJvdmlkZWQgaW5zdGFuY2VcclxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHdoZW4gdGhlIGNvbmZpZyBwcm9jZXNzb3JzIGhhcyBjb21wbGV0ZWQgcnVubmluZ1xyXG4gKiBcclxuICogSW5zdGFuY2UgcHJvY2Vzc29ycyBwZXJmb3JtIG9wZXJhdGlvbnMgb24gbWFuYWdlZCBpbnN0YW5jZXMgYWZ0ZXIgdGhleSBoYXZlIGJlZW4gaW5zdGFuc2lhdGVkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VQcm9jZXNzb3JFeGVjdXRvciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0xpc3R9IGluc3RhbmNlUHJvY2Vzc29yTGlzdCB0aGUgaW5zdGFuY2UgcHJvY2Vzc29yc1xyXG4gICAgICogQHBhcmFtIHtPYmVjdH0gaW5zdGFuY2UgdGhlIGluc3RhbmNlIHRvIHByb2Nlc3NcclxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGV4ZWN1dGUoaW5zdGFuY2UsIGNvbmZpZykge1xyXG4gICAgICAgIGNvbmZpZy5nZXRJbnN0YW5jZVByb2Nlc3NvcnMoKS5mb3JFYWNoKChwcm9jZXNzb3JOYW1lLCBwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc29ySG9sZGVyID0gQ29uZmlnQWNjZXNzb3IuaW5zdGFuY2VIb2xkZXIocHJvY2Vzc29yTmFtZSwgY29uZmlnKTtcclxuICAgICAgICAgICAgcHJvY2Vzc29ySG9sZGVyLmdldEluc3RhbmNlKCkucHJvY2VzcyhpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFR5cGVDb25maWcgfSBmcm9tIFwiLi90eXBlQ29uZmlnLmpzXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBJbnN0YW5jZUhvbGRlciB9IGZyb20gXCIuL2luc3RhbmNlSG9sZGVyLmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiU2luZ2xldG9uQ29uZmlnXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbmdsZXRvbkNvbmZpZyBleHRlbmRzIFR5cGVDb25maWcge1xyXG5cclxuICAgIHN0YXRpYyBuYW1lZChuYW1lLCBjbGFzc1JlZmVyZW5jZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xldG9uQ29uZmlnKG5hbWUsIGNsYXNzUmVmZXJlbmNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdW5uYW1lZChjbGFzc1JlZmVyZW5jZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xldG9uQ29uZmlnKGNsYXNzUmVmZXJlbmNlLm5hbWUsIGNsYXNzUmVmZXJlbmNlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjbGFzc1JlZmVyZW5jZSkge1xyXG4gICAgICAgIHN1cGVyKG5hbWUsIGNsYXNzUmVmZXJlbmNlKTtcclxuICAgIH1cclxuXHJcbiAgICBpbnN0YW5jZUhvbGRlcihwYXJhbWV0ZXJzID0gW10pIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYocGFyYW1ldGVycyAmJiBwYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgdGhpcy5jbGFzc1JlZmVyZW5jZSguLi5wYXJhbWV0ZXJzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgdGhpcy5jbGFzc1JlZmVyZW5jZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBJbnN0YW5jZUhvbGRlci5ob2xkZXJXaXRoTmV3SW5zdGFuY2UodGhpcy5pbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBJbnN0YW5jZUhvbGRlci5ob2xkZXJXaXRoRXhpc3RpbmdJbnN0YW5jZSh0aGlzLmluc3RhbmNlKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBQcm92aWRlciB9IGZyb20gXCIuL2FwaS9wcm92aWRlci5qc1wiO1xyXG5pbXBvcnQgeyBUeXBlQ29uZmlnIH0gZnJvbSBcIi4vdHlwZUNvbmZpZy90eXBlQ29uZmlnLmpzXCI7XHJcbmltcG9ydCB7IEluc3RhbmNlSG9sZGVyIH0gZnJvbSBcIi4vdHlwZUNvbmZpZy9pbnN0YW5jZUhvbGRlci5qc1wiO1xyXG5pbXBvcnQgeyBJbmplY3RvciB9IGZyb20gXCIuL2luamVjdG9yLmpzXCI7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pbmRpUHJvdmlkZXIgZXh0ZW5kcyBQcm92aWRlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7VHlwZUNvbmZpZ30gdHlwZUNvbmZpZyBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodHlwZUNvbmZpZywgaW5qZWN0b3IsIGNvbmZpZykge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7VHlwZUNvbmZpZ30gKi9cclxuICAgICAgICB0aGlzLnR5cGVDb25maWcgPSB0eXBlQ29uZmlnO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge0luamVjdG9yfSAqL1xyXG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtDb25maWd9ICovXHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KHBhcmFtZXRlcnMgPSBbXSkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7SW5zdGFuY2VIb2xkZXJ9ICovXHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2VIb2xkZXIgPSB0aGlzLnR5cGVDb25maWcuaW5zdGFuY2VIb2xkZXIocGFyYW1ldGVycyk7XHJcbiAgICAgICAgaWYgKGluc3RhbmNlSG9sZGVyLmdldFR5cGUoKSA9PT0gSW5zdGFuY2VIb2xkZXIuTkVXX0lOU1RBTkNFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5qZWN0b3IuaW5qZWN0VGFyZ2V0KGluc3RhbmNlSG9sZGVyLmdldEluc3RhbmNlKCksIHRoaXMuY29uZmlnKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zYXRhbmNlSG9sZGVyLmdldEluc3RhbmNlKCk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xyXG5pbXBvcnQgeyBDb25maWdBY2Nlc3NvciB9IGZyb20gXCIuL2NvbmZpZ0FjY2Vzc29yLmpzXCI7XHJcbmltcG9ydCB7IEluamVjdGlvblBvaW50IH0gZnJvbSBcIi4vYXBpL2luamVjdGlvblBvaW50LmpzXCJcclxuaW1wb3J0IHsgSW5zdGFuY2VQcm9jZXNzb3JFeGVjdXRvciB9IGZyb20gXCIuL2luc3RhbmNlUHJvY2Vzc29yL2luc3RhbmNlUHJvY2Vzc29yRXhlY3V0b3IuanNcIjtcclxuaW1wb3J0IHsgSW5zdGFuY2VIb2xkZXIgfSBmcm9tIFwiLi90eXBlQ29uZmlnL2luc3RhbmNlSG9sZGVyLmpzXCI7XHJcbmltcG9ydCB7IE1pbmRpUHJvdmlkZXIgfSBmcm9tIFwiLi9taW5kaVByb3ZpZGVyLmpzXCI7XHJcbmltcG9ydCB7IEluamVjdG9yIH0gZnJvbSBcIi4vaW5qZWN0b3IuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJNaW5kaUluamVjdG9yXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pbmRpSW5qZWN0b3IgZXh0ZW5kcyBJbmplY3RvciB7XHJcblxyXG4gICAgc3RhdGljIGluamVjdCh0YXJnZXQsIGNvbmZpZykge1xyXG4gICAgICAgIElOSkVDVE9SLmluamVjdFRhcmdldCh0YXJnZXQsIGNvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7TWluZGlJbmplY3Rvcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgICAgIHJldHVybiBJTkpFQ1RPUjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBtZXRob2QgZm9yIGluamVjdGluZyBmaWVsZHMgaW4gdGFyZ2V0IG9iamVjdFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gdGFyZ2V0IFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aFxyXG4gICAgICovXHJcbiAgICBpbmplY3RUYXJnZXQodGFyZ2V0LCBjb25maWcsIGRlcHRoID0gMCkge1xyXG4gICAgICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiTWlzc2luZyB0YXJnZXQgb2JqZWN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNvbmZpZykge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIk1pc3NpbmcgY29uZmlnXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWNvbmZpZy5nZXRGaW5hbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNvbmZpZyBub3QgZmluYWxpemVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVwdGggPiAxMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkluamVjdGlvbiBzdHJ1Y3R1cmUgdG9vIGRlZXBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluamVjdG9yID0gdGhpcztcclxuICAgICAgICBPYmplY3Qua2V5cyh0YXJnZXQpLmZvckVhY2goZnVuY3Rpb24oa2V5LGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRba2V5XSBpbnN0YW5jZW9mIEluamVjdGlvblBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbmplY3Rvci5pbmplY3RQcm9wZXJ0eSh0YXJnZXQsIGtleSwgY29uZmlnLCBkZXB0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBJbnN0YW5jZVByb2Nlc3NvckV4ZWN1dG9yLmV4ZWN1dGUodGFyZ2V0LCBjb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHRhcmdldCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlcHRoIFxyXG4gICAgICovXHJcbiAgICBpbmplY3RQcm9wZXJ0eSh0YXJnZXQsIGtleSwgY29uZmlnLCBkZXB0aCkge1xyXG4gICAgICAgIGNvbnN0IGluamVjdGlvblBvaW50ID0gdGFyZ2V0W2tleV07XHJcbiAgICAgICAgaWYgKGluamVjdGlvblBvaW50LmdldFR5cGUoKSA9PT0gSW5qZWN0aW9uUG9pbnQuUFJPVklERVJfVFlQRSkge1xyXG4gICAgICAgICAgICB0aGlzLmluamVjdFByb3BlcnR5UHJvdmlkZXIodGFyZ2V0LCBrZXksIGNvbmZpZywgZGVwdGgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5qZWN0UHJvcGVydHlJbnN0YW5jZSh0YXJnZXQsIGtleSwgY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXQgXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBcclxuICAgICAqL1xyXG4gICAgaW5qZWN0UHJvcGVydHlQcm92aWRlcih0YXJnZXQsIGtleSwgY29uZmlnKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0luamVjdGlvblBvaW50fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0IGluamVjdGlvblBvaW50ID0gdGFyZ2V0W2tleV07XHJcbiAgICAgICAgY29uc3QgdHlwZUNvbmZpZyA9IENvbmZpZ0FjY2Vzc29yLnR5cGVDb25maWdCeU5hbWUoaW5qZWN0aW9uUG9pbnQuZ2V0TmFtZSgpLCBjb25maWcpO1xyXG4gICAgICAgIHRhcmdldFtrZXldID0gbmV3IE1pbmRpUHJvdmlkZXIodHlwZUNvbmZpZywgdGhpcywgY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXQgXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBcclxuICAgICAqL1xyXG4gICAgaW5qZWN0UHJvcGVydHlJbnN0YW5jZSh0YXJnZXQsIGtleSwgY29uZmlnLCBkZXB0aCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtJbmplY3Rpb25Qb2ludH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBpbmplY3Rpb25Qb2ludCA9IHRhcmdldFtrZXldO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlSG9sZGVyID0gQ29uZmlnQWNjZXNzb3IuaW5zdGFuY2VIb2xkZXIoaW5qZWN0aW9uUG9pbnQuZ2V0TmFtZSgpLCBjb25maWcsIGluamVjdGlvblBvaW50LmdldFBhcmFtZXRlcnMoKSk7XHJcbiAgICAgICAgaWYoaW5zdGFuY2VIb2xkZXIuZ2V0VHlwZSgpID09PSBJbnN0YW5jZUhvbGRlci5ORVdfSU5TVEFOQ0UpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmplY3RUYXJnZXQoaW5zdGFuY2VIb2xkZXIuZ2V0SW5zdGFuY2UoKSwgY29uZmlnLCBkZXB0aCsrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBpbnN0YW5jZUhvbGRlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY29uc3QgSU5KRUNUT1IgPSBuZXcgTWluZGlJbmplY3RvcigpOyIsImltcG9ydCB7IE1hcCwgTGlzdCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IFR5cGVDb25maWcgfSBmcm9tIFwiLi90eXBlQ29uZmlnL3R5cGVDb25maWcuanNcIjtcclxuaW1wb3J0IHsgQ29uZmlnUHJvY2Vzc29yRXhlY3V0b3IgfSBmcm9tIFwiLi9jb25maWdQcm9jZXNzb3IvY29uZmlnUHJvY2Vzc29yRXhlY3V0b3IuanNcIjtcclxuaW1wb3J0IHsgU2luZ2xldG9uQ29uZmlnIH0gZnJvbSBcIi4vdHlwZUNvbmZpZy9zaW5nbGV0b25Db25maWcuanNcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XHJcbmltcG9ydCB7IE1pbmRpSW5qZWN0b3IgfSBmcm9tIFwiLi9taW5kaUluamVjdG9yLmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ29uZmlnXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pbmRpQ29uZmlnIGV4dGVuZHMgQ29uZmlnIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25maWdFbnRyaWVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnUHJvY2Vzc29ycyA9IG5ldyBMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZVByb2Nlc3NvcnMgPSBuZXcgTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIFxyXG4gICAgICovXHJcbiAgICBtZXJnZShjb25maWcpIHtcclxuICAgICAgICBpZiAoIWNvbmZpZy5nZXRGaW5hbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBtZXJnZSBpbnRvIGFuIHVuZmluYWxpemVkIGNvbmZpZ1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3Q29uZmlnRW50cmllcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBuZXdDb25maWdFbnRyaWVzLmFkZEFsbCh0aGlzLmNvbmZpZ0VudHJpZXMpO1xyXG4gICAgICAgIG5ld0NvbmZpZ0VudHJpZXMuYWRkQWxsKGNvbmZpZy5nZXRDb25maWdFbnRyaWVzKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdDb25maWdQcm9jZXNzb3JzID0gbmV3IExpc3QoKTtcclxuICAgICAgICBuZXdDb25maWdQcm9jZXNzb3JzLmFkZEFsbCh0aGlzLmNvbmZpZ1Byb2Nlc3NvcnMpO1xyXG4gICAgICAgIG5ld0NvbmZpZ1Byb2Nlc3NvcnMuYWRkQWxsKGNvbmZpZy5nZXRDb25maWdQcm9jZXNzb3JzKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdJbnN0YW5jZVByb2Nlc3NvcnMgPSBuZXcgTGlzdCgpO1xyXG4gICAgICAgIG5ld0luc3RhbmNlUHJvY2Vzc29ycy5hZGRBbGwodGhpcy5pbnN0YW5jZVByb2Nlc3NvcnMpO1xyXG4gICAgICAgIG5ld0luc3RhbmNlUHJvY2Vzc29ycy5hZGRBbGwoY29uZmlnLmdldEluc3RhbmNlUHJvY2Vzc29ycygpKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb25maWdFbnRyaWVzID0gbmV3Q29uZmlnRW50cmllcztcclxuICAgICAgICB0aGlzLmNvbmZpZ1Byb2Nlc3NvcnMgPSBuZXdDb25maWdQcm9jZXNzb3JzO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VQcm9jZXNzb3JzID0gbmV3SW5zdGFuY2VQcm9jZXNzb3JzO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtUeXBlQ29uZmlnfSB0eXBlQ29uZmlnIFxyXG4gICAgICovXHJcbiAgICBhZGRUeXBlQ29uZmlnKHR5cGVDb25maWcpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ0VudHJpZXMuc2V0KHR5cGVDb25maWcuZ2V0TmFtZSgpLCB0eXBlQ29uZmlnKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBhZGRDb25maWdQcm9jZXNzb3IoY29uZmlnUHJvY2Vzc29yKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdQcm9jZXNzb3JzLmFkZChjb25maWdQcm9jZXNzb3IubmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkVHlwZUNvbmZpZyhTaW5nbGV0b25Db25maWcudW5uYW1lZChjb25maWdQcm9jZXNzb3IpKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJbnN0YW5jZVByb2Nlc3NvcihpbnN0YW5jZVByb2Nlc3Nvcikge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VQcm9jZXNzb3JzLmFkZChpbnN0YW5jZVByb2Nlc3Nvci5uYW1lKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRUeXBlQ29uZmlnKFNpbmdsZXRvbkNvbmZpZy51bm5hbWVkKGluc3RhbmNlUHJvY2Vzc29yKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7TGlzdH0gdHlwZUNvbmZpZ0xpc3RcclxuICAgICAqL1xyXG4gICAgYWRkQWxsVHlwZUNvbmZpZyh0eXBlQ29uZmlnTGlzdCkge1xyXG4gICAgICAgIHR5cGVDb25maWdMaXN0LmZvckVhY2goKHR5cGVDb25maWcscGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnRW50cmllcy5zZXQodHlwZUNvbmZpZy5nZXROYW1lKCksIHR5cGVDb25maWcpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0xpc3R9IGNvbmZpZ1Byb2Nlc3Nvckxpc3QgXHJcbiAgICAgKi9cclxuICAgIGFkZEFsbENvbmZpZ1Byb2Nlc3Nvcihjb25maWdQcm9jZXNzb3JMaXN0KSB7XHJcbiAgICAgICAgY29uZmlnUHJvY2Vzc29yTGlzdC5mb3JFYWNoKChjb25maWdQcm9jZXNzb3IscGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnUHJvY2Vzc29ycy5hZGQoY29uZmlnUHJvY2Vzc29yLm5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFR5cGVDb25maWcoU2luZ2xldG9uQ29uZmlnLnVubmFtZWQoY29uZmlnUHJvY2Vzc29yKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7TGlzdH0gaW5zdGFuY2VQcm9jZXNzb3JMaXN0IFxyXG4gICAgICovXHJcbiAgICBhZGRBbGxJbnN0YW5jZVByb2Nlc3NvcihpbnN0YW5jZVByb2Nlc3Nvckxpc3QpIHtcclxuICAgICAgICBpbnN0YW5jZVByb2Nlc3Nvckxpc3QuZm9yRWFjaCgoaW5zdGFuY2VQcm9jZXNzb3IscGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VQcm9jZXNzb3JzLmFkZChpbnN0YW5jZVByb2Nlc3Nvci5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRUeXBlQ29uZmlnKFNpbmdsZXRvbkNvbmZpZy51bm5hbWVkKGluc3RhbmNlUHJvY2Vzc29yKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7TWFwfVxyXG4gICAgICovXHJcbiAgICBnZXRDb25maWdFbnRyaWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0VudHJpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7TGlzdH1cclxuICAgICAqL1xyXG4gICAgZ2V0Q29uZmlnUHJvY2Vzc29ycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWdQcm9jZXNzb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0xpc3R9XHJcbiAgICAgKi9cclxuICAgIGdldEluc3RhbmNlUHJvY2Vzc29ycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZVByb2Nlc3NvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmluYWxpemVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmFsaXplZDtcclxuICAgIH1cclxuXHJcbiAgICBmaW5hbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIENvbmZpZ1Byb2Nlc3NvckV4ZWN1dG9yLmV4ZWN1dGUodGhpcy5nZXRDb25maWdQcm9jZXNzb3JzKCksIE1pbmRpSW5qZWN0b3IuZ2V0SW5zdGFuY2UoKSwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgVHlwZUNvbmZpZyB9IGZyb20gXCIuL3R5cGVDb25maWcuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb29sQ29uZmlnIGV4dGVuZHMgVHlwZUNvbmZpZyB7XHJcblxyXG4gICAgc3RhdGljIG5hbWVkKG5hbWUsIGNsYXNzUmVmZXJlbmNlLCBwb29sU2l6ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9vbENvbmZpZyhuYW1lLCBjbGFzc1JlZmVyZW5jZSwgcG9vbFNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1bm5hbWVkKGNsYXNzUmVmZXJlbmNlLCBwb29sU2l6ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUG9vbENvbmZpZyhjbGFzc1JlZmVyZW5jZS5uYW1lLCBjbGFzc1JlZmVyZW5jZSwgcG9vbFNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNsYXNzUmVmZXJlbmNlLCBwb29sU2l6ZSkge1xyXG4gICAgICAgIHN1cGVyKG5hbWUsIGNsYXNzUmVmZXJlbmNlKTtcclxuICAgICAgICB0aGlzLnBvb2xTaXplID0gcG9vbFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgaW5zdGFuY2VIb2xkZXIocGFyYW1ldGVycyA9IFtdKSB7XHJcblxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFR5cGVDb25maWcgfSBmcm9tIFwiLi90eXBlQ29uZmlnLmpzXCI7XHJcbmltcG9ydCB7IEluc3RhbmNlSG9sZGVyIH0gZnJvbSBcIi4vaW5zdGFuY2VIb2xkZXIuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm90b3R5cGVDb25maWcgZXh0ZW5kcyBUeXBlQ29uZmlnIHtcclxuXHJcbiAgICBzdGF0aWMgbmFtZWQobmFtZSwgY2xhc3NSZWZlcmVuY2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb3RvdHlwZUNvbmZpZyhuYW1lLCBjbGFzc1JlZmVyZW5jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVubmFtZWQoY2xhc3NSZWZlcmVuY2UpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb3RvdHlwZUNvbmZpZyhjbGFzc1JlZmVyZW5jZS5uYW1lLCBjbGFzc1JlZmVyZW5jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY2xhc3NSZWZlcmVuY2UpIHtcclxuICAgICAgICBzdXBlcihuYW1lLCBjbGFzc1JlZmVyZW5jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBwYXJhbWV0ZXJzIHRoZSBwYXJhbWV0ZXJzIHRvIHVzZSBmb3IgdGhlIGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGluc3RhbmNlSG9sZGVyKHBhcmFtZXRlcnMgPSBbXSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgaWYocGFyYW1ldGVycyAmJiBwYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgdGhpcy5jbGFzc1JlZmVyZW5jZSguLi5wYXJhbWV0ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyB0aGlzLmNsYXNzUmVmZXJlbmNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBJbnN0YW5jZUhvbGRlci5ob2xkZXJXaXRoTmV3SW5zdGFuY2UoaW5zdGFuY2UpO1xyXG4gICAgfVxyXG5cclxuXHJcbn0iXSwibmFtZXMiOlsiSW5qZWN0aW9uUG9pbnQiLCJJTlNUQU5DRV9UWVBFIiwiUFJPVklERVJfVFlQRSIsIltvYmplY3QgT2JqZWN0XSIsIm5hbWUiLCJjbGFzc1JlZmVyZW5jZSIsInBhcmFtZXRlcnMiLCJ0eXBlIiwidGhpcyIsIkxPRyIsIkxvZ2dlciIsIlByb3ZpZGVyIiwiQ29uZmlnIiwiSW5zdGFuY2VIb2xkZXIiLCJORVdfSU5TVEFOQ0UiLCJFWElTVElOR19JTlNUQU5DRSIsImluc3RhbmNlIiwiVHlwZUNvbmZpZyIsIkNvbmZpZ0FjY2Vzc29yIiwiY29uZmlnIiwidHlwZUNvbmZpZyIsInR5cGVDb25maWdCeU5hbWUiLCJlcnJvciIsImluc3RhbmNlSG9sZGVyIiwiY29uZmlnRW50cnkiLCJnZXRDb25maWdFbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwicGFyZW50IiwiQ29uZmlnUHJvY2Vzc29yRXhlY3V0b3IiLCJjb25maWdQcm9jZXNzb3JDbGFzc05hbWVMaXN0IiwiaW5qZWN0b3IiLCJwcm9taXNlTGlzdCIsIkxpc3QiLCJjb25maWdQcm9jZXNzb3JDbGFzc05hbWUiLCJwcm9jZXNzb3JIb2xkZXIiLCJnZXRUeXBlIiwiaW5qZWN0VGFyZ2V0IiwiZ2V0SW5zdGFuY2UiLCJwcm9jZXNzb3JzUHJvbWlzZSIsInByb2Nlc3NDb25maWciLCJhZGQiLCJQcm9taXNlIiwiYWxsIiwiZ2V0QXJyYXkiLCJJbmplY3RvciIsInRhcmdldCIsImRlcHRoIiwiSW5zdGFuY2VQb3N0Q29uZmlnVHJpZ2dlciIsInBvc3RDb25maWciLCJJbnN0YW5jZVByb2Nlc3NvckV4ZWN1dG9yIiwiZ2V0SW5zdGFuY2VQcm9jZXNzb3JzIiwicHJvY2Vzc29yTmFtZSIsInByb2Nlc3MiLCJTaW5nbGV0b25Db25maWciLCJzdXBlciIsImhvbGRlcldpdGhFeGlzdGluZ0luc3RhbmNlIiwibGVuZ3RoIiwiaG9sZGVyV2l0aE5ld0luc3RhbmNlIiwiTWluZGlQcm92aWRlciIsImluc2F0YW5jZUhvbGRlciIsIk1pbmRpSW5qZWN0b3IiLCJJTkpFQ1RPUiIsIkVycm9yIiwiZ2V0RmluYWxpemVkIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4IiwiaW5qZWN0UHJvcGVydHkiLCJleGVjdXRlIiwiaW5qZWN0UHJvcGVydHlQcm92aWRlciIsImluamVjdFByb3BlcnR5SW5zdGFuY2UiLCJpbmplY3Rpb25Qb2ludCIsImdldE5hbWUiLCJnZXRQYXJhbWV0ZXJzIiwiTWluZGlDb25maWciLCJmaW5hbGl6ZWQiLCJjb25maWdFbnRyaWVzIiwiTWFwIiwiY29uZmlnUHJvY2Vzc29ycyIsImluc3RhbmNlUHJvY2Vzc29ycyIsIm5ld0NvbmZpZ0VudHJpZXMiLCJhZGRBbGwiLCJuZXdDb25maWdQcm9jZXNzb3JzIiwiZ2V0Q29uZmlnUHJvY2Vzc29ycyIsIm5ld0luc3RhbmNlUHJvY2Vzc29ycyIsInNldCIsImNvbmZpZ1Byb2Nlc3NvciIsImFkZFR5cGVDb25maWciLCJ1bm5hbWVkIiwiaW5zdGFuY2VQcm9jZXNzb3IiLCJ0eXBlQ29uZmlnTGlzdCIsImNvbmZpZ1Byb2Nlc3Nvckxpc3QiLCJpbnN0YW5jZVByb2Nlc3Nvckxpc3QiLCJQb29sQ29uZmlnIiwicG9vbFNpemUiLCJQcm90b3R5cGVDb25maWciXSwibWFwcGluZ3MiOiJnSEFBYUEsZ0JBRVRDLDJCQUE2QixNQUFPLEdBQ3BDQywyQkFBNkIsTUFBTyxHQUVwQ0Msc0JBQXNCQyxFQUFNQyxFQUFnQkMsTUFDeEMsTUFBTyxJQUFJTixnQkFBZUksRUFBTUMsRUFBZ0JMLGVBQWVDLGNBQWVLLEdBR2xGSCxnQkFBZ0JFLEVBQWdCQyxNQUM1QixNQUFPLElBQUlOLGdCQUFlSyxFQUFlRCxLQUFNQyxFQUFnQkwsZUFBZUMsY0FBZUssR0FHakdILHVCQUF1QkMsRUFBTUMsRUFBZ0JDLE1BQ3pDLE1BQU8sSUFBSU4sZ0JBQWVJLEVBQU1DLEVBQWdCTCxlQUFlRSxjQUFlSSxHQUdsRkgsZ0JBQWdCRSxFQUFnQkMsTUFDNUIsTUFBTyxJQUFJTixnQkFBZUssRUFBZUQsS0FBTUMsRUFBZ0JMLGVBQWVFLGNBQWVJLEdBR2pHSCxZQUFZQyxFQUFNQyxFQUFnQkUsRUFBT1AsZUFBZUMsY0FBZUssR0FDbkVFLEtBQUtKLEtBQU9BLEVBQ1pJLEtBQUtILGVBQWlCQSxFQUN0QkcsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0YsV0FBYUEsRUFHdEJILFVBQ0ksTUFBT0ssTUFBS0osS0FHaEJELG9CQUNJLE1BQU9LLE1BQUtILGVBR2hCRixVQUNHLE1BQU9LLE1BQUtELEtBR2ZKLGdCQUNJLE1BQU9LLE1BQUtGLGlCQ3ZDZEcsS0FBTSxHQUFJQyxvQkFB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
